modules:
  - type: os-release
    properties:
      ID: mizukios
      ID_LIKE: fedora
      NAME: MizukiOS
      PRETTY_NAME: MizukiOS
      DEFAULT_HOSTNAME: mizukios
      VERSION_CODENAME: Ribbon

  - type: dnf
    repos:
      cleanup: true
      copr:
        - atim/starship
    install:
      packages:
        - chezmoi
        - fish
        - hyfetch
        - starship

  - type: dnf
    repos:
      cleanup: true
      copr:
        - yalter/niri-git
        - avengemedia/dms-git
        - avengemedia/danklinux
        - ulysg/xwayland-satellite
    install:
      install-weak-deps: false
      packages:
        - repo: copr:copr.fedorainfracloud.org:ulysg:xwayland-satellite
          packages:
           - xwayland-satellite
        - repo: copr:copr.fedorainfracloud.org:yalter:niri-git
          packages:
           - niri
        - cinnamon-translations
        - dms
        - dms-cli
        - dms-greeter
        - dgop
        - fcitx5-configtool
        - fcitx5-mozc
        - fcitx5-chinese-addons
        - fcitx5-gtk
        - fcitx5-hangul
        - kcm-fcitx5
        - nemo
        - quickshell-git
        - wl-clipboard

  - type: dnf # adds qt6 things
    repos:
      cleanup: true
    install:
      install-weak-deps: false
      packages:
        - kf6-kirigami
        - qt6ct
        - polkit-kde
        - plasma-breeze
        - kf6-qqc2-desktop-style

  # copying system files over to the system
  - type: files
    files:
      - source: system
        destination: /

  - type: chezmoi
    repository: "https://github.com/koitorin/MizukiOS-Ribbons"
    all-users: true
    file-conflict-policy: replace

  - type: systemd
    user:
        enabled:
            - dms.service
            - cliphist.service
